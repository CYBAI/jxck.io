<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="link rel service worker">
<meta http-equiv="origin-trial" data-feature="Foreign Fetch" data-expires="2017-01-16" content="Ai32KiE0NsOIRPR/NxvUwEpcM4hYyo6RPRvkG8liNEIXP4DW6furrliZkqCqZh/ug83oAcdctA12PEh3ymNUZg0AAABneyJvcmlnaW4iOiAiaHR0cHM6Ly9qeGNrLmlvOjQ0MyIsICJpc1N1YmRvbWFpbiI6IHRydWUsICJmZWF0dXJlIjogIkZvcmVpZ25GZXRjaCIsICJleHBpcnkiOiAxNDg0NTgyMTg2fQ==">

<title>Link rel=Service Worker DEMO | labs.jxck.io</title>

<h1>Link rel=serviceworker DEMO</h1>

<p>button in this page is for fetching <strong>random value</strong> from <a href=./random>./random</a> API
<p>API serves with <code>Link: rel=serviceworker</code> header and register service worker for offline support
<p>so make this page offline via devtools, you can fetch random value from service worker fallback

<p>random: <span id=random></span></p>
<button id=button>fetch</button>

<script>
var $button = document.getElementById('button');
$button.addEventListener('click', () => {
  console.log('click');
  fetch('./random')
    .then((res) => res.text())
    .then((text) => {
      console.log(text);
      document.getElementById('random').textContent = text;
    })
  .catch(console.log.bind(console));
});
$button.dispatchEvent(new Event('click'));
</script>
