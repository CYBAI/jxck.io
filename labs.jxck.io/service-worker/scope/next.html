<!DOCTYPE html>
<meta charset=utf-8>
<title>Service Worker: scope DEMO</title>

<h1>Service Worker: scope</h1>

<strong>/next.html</strong>

<input type=button id=button value=button>

<script>
'use strict';
const $  = document.querySelector.bind(document)
const $$ = document.querySelectorAll.bind(document)
EventTarget.prototype.on = EventTarget.prototype.addEventListener

console.log('next')

document.on('DOMContentLoaded', async (e) => {
  console.log(e)
  await navigator.serviceWorker.register('worker2.js', { scope: './next.html' })
  await navigator.serviceWorker.ready
})

$('#button').on('click', async () => {
  const res  = await fetch('test')
  const text = await res.text()
  console.log(text)
})
</script>
