<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">

<title>WebAuthentication API DEMO | labs.jxck.io</title>

<style>
</style>

<h1>WebAuthentication API DEMO</h1>

<script>
  document.addEventListener('DOMContentLoaded', async () => {
    if (!window.PublicKeyCredential) return;

    const publicKey = {
      // The challenge must be produced by the server, see the Security Considerations
      challenge: crypto.getRandomValues(new Uint8Array(32)),

      // Relying Party:
      rp: {
        name: "labs.jxck.io"
      },

      // User:
      user: {
        id: new TextEncoder("utf-8").encode("jxck@example.com"),
        name: "jxck <jxck@example.com>",
        displayName: "Jxck",
      },

      // This Relying Party will accept either an ES256 or RS256 credential, but
      // prefers an ES256 credential.
      pubKeyCredParams: [
        {
          type: "public-key",
          alg: -7 // "ES256" as registered in the IANA COSE Algorithms registry
        }
      ],

      timeout: 60000,  // 1 minute
      excludeCredentials: [], // No exclude list of PKCredDescriptors
      extensions: {}  // Include location information
      // in attestation
    }

    // Note: The following call will cause the authenticator to display UI.
    try {
      console.log(publicKey)
      const cred = await navigator.credentials.create({ publicKey })
      console.log(cred)
    } catch (err) {
      console.error(cred)
    }
  })
</script>
