<!DOCTYPE html>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="Intersection Observer DEMO">
<title>Intersection Observer DEMO | labs.jxck.io</title>

<style>
  body {
    width: 100%;
    font-size: 2em;
  }

  div {
    margin: 1em;
    width: 500px;
    height: 500px;
    background-color: #ccc;
    box-sizing: border-box;
  }
</style>

<p>Intersection Observer DEMO  with threshold option

<div></div>
<div></div>
<div></div>

<script>
(() => {
  // fire callback every 10% intersection change
  const threshold = [0, 0.1, 0.2, 0.3, 0.4, 0.5, 0.6, 0.7, 0.8, 0.9, 1.0]

  const round = n => Math.round(n*100)
  const observer = new IntersectionObserver((changes) => {
    for (const change of changes) {
      const target = change.target
      const ratio = change.intersectionRatio
      target.textContent = `${round(ratio)}%`
    }
  }, {threshold}) // No Root is viewport

  const targets = document.querySelectorAll('div')
  for (const target of targets) {
    observer.observe(target)
  }
})();
</script>
