<!DOCTYPE html>
<meta charset=utf-8>
<meta name=description content="demo page of upgrade insecure requests">
<meta name=viewport content="width=device-width,initial-scale=1">
<title>Mixed Contents Demo | labs.jxck.io</title>

<style>
pre {
  font-size: 1em;
  background-color: #ccc;
  padding: 1em;
}

strong {
  color: #ff0000;
}

img, audio, video, iframe, object {
  border: solid 1px black;
  display: block;
}
</style>

<p><a href=/mixed>back to list</a>

<h1>Mixed Contents Demo</h1>

<p><strong>access https://~ and see error message on console</strong>

<hr>
<h2>Passive Contents</h2>
<div id=passive>
  <dl>
    <dt>img</dt>
    <dd><img src=http://labs.jxck.io/mixed/contents/jxck.png width=100 height=100></img></dd>

    <dt>audio</dt>
    <dd><audio controls src=http://labs.jxck.io/mixed/contents/audio.mp3></audio></dd>

    <dt>video</dt>
    <dd><video controls src=http://labs.jxck.io/mixed/contents/video.mp4></video></dd>

    <!-- TODO: <object> with requesting subresource with http -->
  </dl>
</div>

<hr>

<h2>Active Contents</h2>
<div id=active>
  <dl>
    <dt>iframe</dt>
    <dd><iframe src=http://labs.jxck.io/></iframe></dd>

    <dt>object</dt>
    <dd><object data=http://labs.jxck.io/mixed/contents/demo.swf type=application/x-shockwave-flash width=300 height=150></object></dd>

    <dt>stylesheet</dt>
    <dd><link href=http://labs.jxck.io/mixed/contents/style.css rel=stylesheet></link></dd>

    <dt>script</dt>
    <dd><script src=http://labs.jxck.io/mixed/contents/script.js></script></dd>

    <dt>style url()</dt>
    <dd>
      <style>
        body {
          background-image: url(http://labs.jxck.io/mixed/contents/1x1.png);
        }
      </style>
    </dd>

    <dt>XHR</dt>
    <dd>
      <script>
        var xhr = new XMLHttpRequest();
        xhr.open('GET', 'http://labs.jxck.io');
        xhr.addEventListener('load', () => {
          console.log(xhr.status);
        });
        xhr.send();
      </script>
    </dd>
  </dl>
</div>

<hr>

<h2>About Mixed Contents</h2>

<h3>Mixed Passive Content</h3>

<ul>
  <li>&lt;img src&gt;
  <li>&lt;audio src&gt;
  <li>&lt;video src&gt;
  <li>(&lt;object&gt; with requesting subresource with http)
</ul>

<pre id=passive-src></pre>


<h3>Mixed Active Content</h3>

<ul>
  <li>&lt;iframe src&gt;
  <li>&lt;object data&gt;
  <li>&lt;link href&gt;
  <li>&lt;script src&gt;
  <li>url() in CSS (@font-face, background-image etc)
  <li>XHR
</ul>


<pre id=active-src></pre>

<hr>

<h3>reference</h3>

<ul>
  <li><a href=https://support.mozilla.org/en-US/kb/how-does-content-isnt-secure-affect-my-safety>How does content that isn't secure affect my safety?</a>
  <li><a href=https://developer.mozilla.org/en-US/docs/Security/MixedContent/How_to_fix_website_with_mixed_content>How to fix a website with blocked mixed content</a>
  <li><a href=https://developers.google.com/web/fundamentals/security/prevent-mixed-content/fixing-mixed-content>Find and fix mixed content</a>
</ul>

<h2>Ackknowledge/License for Contents</h2>

<ul>
  <li>Sample Audio/Video from <a href=http://www.sample-videos.com/>samle-videos.com</a>
  <li>Sample Image from <a href=https://commons.wikimedia.org/wiki/File:1x1.png>commons.wikimedia.org</a>
  <li>Sample Flash from <a href=https://github.com/mozilla/shumway/tree/master/examples/Box2DFlashAS3>github.com/mozilla/shumway</a>
</ul>

<script>
// html special chars
function hsc(str) {
  return str.replace(/&/g, '&amp;')
            .replace(/</g, '&lt;')
            .replace(/>/g, '&gt;')
            .replace(/"/g, '&quot;')
            .replace(/'/g, '&#039;');
}

['passive', 'active'].forEach(function(id) {
  var html = document.getElementById(id).innerHTML;
  document.getElementById(id+'-src').innerHTML = hsc(html.trim());
});
</script>
